[{"history": {"proof": "intros net st' ps' d h os d' ms. hauto lq: on depth: 3.", "repairs": ["", "hammer"], "exceptions": [{"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'."], "tactic": "pose proof (logs_sorted_invariant net H_reachable) as [H_sorted_host [H_sorted_nw [H_packets_gt_prevIndex H_packets_ge_prevTerm]]].", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params tsi : term_sanity_interface net : network st' : list packet ps' : Net.name -> data d : packets_ge_prevTerm net h : forall p : packet, In p st' -> In p (nwPackets net) \\\\/ False os : packet d' : term ms : name H_doLeader : logIndex H_P : term H_reachable : list entry H_nwState : logIndex H_st' : entry H_ps' : In os (nwPackets {| nwPackets := st'; nwState := ps' |}) The term \"H_reachable\" has type \"list entry\" while it is expected to have type \"raft_intermediate_reachable net\".", "type": "wrong_type", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant."], "tactic": "split.", "exn": "Not an inductive goal with 1 constructor.", "type": "not_inductive_goal", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-"], "tactic": "intros h0.", "exn": "No product even after head-reduction.", "type": "no_product", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-"], "tactic": ["rewrite H_st'.", ""], "exn": "Cannot find an homogeneous relation to rewrite.", "type": "no_rewrite_homo", "handled": false}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-"], "tactic": "-", "exn": "Wrong bullet -: Current bullet - is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq."], "tactic": "apply H_sorted_nw in H_in; auto.", "exn": "The reference H_sorted_nw was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq."], "tactic": "+", "exn": "Wrong bullet +: Current bullet + is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+"], "tactic": "split.", "exn": "Not an inductive product.", "type": "not_inductive_product", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+"], "tactic": "qsimpl time: 1 use: sorted,log,auto,name_eq_dec,handleAppendEntries_logs_sorted,SortedInterface,t,logs_sorted_invariant.", "exn": "The reference auto was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+"], "tactic": "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,SortedInterface,t,logs_sorted_invariant.", "exn": "The reference SortedInterface was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+"], "tactic": "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,t,logs_sorted_invariant.", "exn": "The reference t was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*"], "tactic": "intros p t n pli plt entries c e H_in H_eq H_in_e.", "exn": "c is already used.", "type": "used_var", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*"], "tactic": "intros p t n pli plt entries c' e H_in H_eq H_in_e.", "exn": "No product even after head-reduction.", "type": "no_product", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*"], "tactic": "apply H_packets_gt_prevIndex in H_in; auto.", "exn": "No such hypothesis: H_in", "type": "no_hypos", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*"], "tactic": "qsimpl time: 1 use: sorted,log,auto,name_eq_dec,handleAppendEntries_logs_sorted,SortedInterface,t,logs_sorted_invariant.", "exn": "The reference auto was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*"], "tactic": "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,SortedInterface,t,logs_sorted_invariant.", "exn": "The reference SortedInterface was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*"], "tactic": "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,t,logs_sorted_invariant.", "exn": "The reference t was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant."], "tactic": "*", "exn": "Wrong bullet *: Current bullet * is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "--", "shelve.", "--", "shelve.", "--", "shelve.", "*"], "tactic": "intros p t n pli plt entries c e H_in_p H_eq H_in_entries.", "exn": "No product even after head-reduction.", "type": "no_product", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "--", "shelve.", "--", "shelve.", "--", "shelve.", "*"], "tactic": "apply H_packets_ge_prevTerm in H_in_p; auto.", "exn": "No such hypothesis: H_in_p", "type": "no_hypos", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "--", "shelve.", "--", "shelve.", "--", "shelve.", "*"], "tactic": "qsimpl time: 1 use: sorted,log,auto,name_eq_dec,handleAppendEntries_logs_sorted,SortedInterface,t,logs_sorted_invariant.", "exn": "The reference auto was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "--", "shelve.", "--", "shelve.", "--", "shelve.", "*"], "tactic": "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,SortedInterface,t,logs_sorted_invariant.", "exn": "The reference SortedInterface was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' d h os d' ms.", "intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'.", "qsimpl time: 1 use: logs_sorted_invariant.", "qsimpl time: 1 use: logs_sorted_invariant.", "-", "shelve.", "-", "split.", "+", "intros p t n prevT prevI entries c H_in H_eq.", "shelve.", "+", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "*", "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,logs_sorted_invariant.", "--", "shelve.", "--", "shelve.", "--", "shelve.", "*"], "tactic": "qsimpl time: 1 use: sorted,log,name_eq_dec,handleAppendEntries_logs_sorted,t,logs_sorted_invariant.", "exn": "The reference t was not found in the current environment.", "type": "ref_not_found", "handled": true}]}, "chat": [], "original": "intros net st' ps' d h os d' ms. intros H_doLeader H_P H_reachable H_nwState H_st' H_ps'. pose proof (logs_sorted_invariant net H_reachable) as [H_sorted_host [H_sorted_nw [H_packets_gt_prevIndex H_packets_ge_prevTerm]]]. split. - unfold logs_sorted_host. intros h0. rewrite H_st'. destruct (name_eq_dec h0 h). + subst. rewrite H_nwState. assert (sorted (log d')) as H_sorted_log. { eapply SortedInterface.handleAppendEntries_logs_sorted with (p := ?p) (t := ?t) (n := ?n) (pli := ?pli) (plt := ?plt) (es := ?es) (ci := ?ci) (st' := d') (m := ?m); eauto. } auto. + rewrite H_nwState. apply H_sorted_host. - split. + unfold logs_sorted_nw. intros p t n prevT prevI entries c H_in H_eq. apply H_sorted_nw in H_in; auto. + split. * unfold packets_gt_prevIndex. intros p t n pli plt entries c e H_in H_eq H_in_e. apply H_packets_gt_prevIndex in H_in; auto. * unfold packets_ge_prevTerm. intros p t n pli plt entries c e H_in_p H_eq H_in_entries. apply H_packets_ge_prevTerm in H_in_p; auto.", "back_times": 0, "succ": true, "time": 58.574668169021606}]