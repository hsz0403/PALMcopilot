[{"history": {"proof": "", "repairs": [], "exceptions": [{"ctx": ["split.", "-"], "tactic": "eapply SortedInterface.handleAppendEntries_logs_sorted; eauto.", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params tsi : term_sanity_interface net, net' : network H : forall h : Net.name, nwState net h = nwState net' h H0 : forall p : packet, In p (nwPackets net') -> In p (nwPackets net) H1 : logs_sorted net H2 : raft_intermediate_reachable net Unable to unify \"(fix sorted (log : list entry) : Prop := match log with | [] => True | e :: es => (forall e' : entry, In e' es -> eIndex e > eIndex e' /\\\\ eTerm e >= eTerm e') /\\\\ sorted es end) (log ?M2292)\" with \"forall h : Net.name, sorted (log (nwState net' h))\".", "type": "cannot_unify", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted."], "tactic": "apply logs_sorted_invariant; eauto.", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params H3 : forall (net : network) (p : packet) (t : term) (n : name) (pli : logIndex) (plt : term) (es : list entry) (ci : logIndex) (st' : raft_data) (m : msg), raft_intermediate_reachable net -> logs_sorted net -> handleAppendEntries (pDst p) (nwState net (pDst p)) t n pli plt es ci = (st', m) -> pBody p = AppendEntries t n pli plt es ci -> In p (nwPackets net) -> sorted (log st') net, net' : network H : forall h : name, nwState net h = nwState net' h H0 : forall p : packet, In p (nwPackets net') -> In p (nwPackets net) H2 : raft_intermediate_reachable net H4 : logs_sorted_host net H1 : logs_sorted_nw net H5 : packets_gt_prevIndex net H7 : packets_ge_prevTerm net no_entries_past_current_term_invariant : forall net : network, raft_intermediate_reachable net -> no_entries_past_current_term net Unable to unify \"logs_sorted_host ?M4288 /\\\\ logs_sorted_nw ?M4288 /\\\\ packets_gt_prevIndex ?M4288 /\\\\ packets_ge_prevTerm ?M4288\" with \"forall h : Net.name, sorted (log (nwState net' h))\".", "type": "cannot_unify", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted."], "tactic": "-", "exn": "Wrong bullet -: Current bullet - is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "+", "shelve.", "+", "shelve.", "-", "split.", "+"], "tactic": "eapply SortedInterface.handleAppendEntries_logs_sorted; eauto.", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params tsi : term_sanity_interface net, net' : network H : forall h : Net.name, nwState net h = nwState net' h H0 : forall p : packet, In p (nwPackets net') -> In p (nwPackets net) H1 : logs_sorted net H2 : raft_intermediate_reachable net Unable to unify \"(fix sorted (log : list entry) : Prop := match log with | [] => True | e :: es => (forall e' : entry, In e' es -> eIndex e > eIndex e' /\\\\ eTerm e >= eTerm e') /\\\\ sorted es end) (log ?M7995)\" with \"forall (p : packet) (t : term) (n : name) (prevT : logIndex) (prevI : term) (entries : list entry) (c : logIndex), In p (nwPackets net') -> pBody p = AppendEntries t n prevT prevI entries c -> sorted entries\".", "type": "cannot_unify", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "+", "shelve.", "+", "shelve.", "-", "split.", "+", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted."], "tactic": "apply logs_sorted_invariant; eauto.", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params H4 : forall (net : network) (p : packet) (t : term) (n : name) (pli : logIndex) (plt : term) (es : list entry) (ci : logIndex) (st' : raft_data) (m : msg), raft_intermediate_reachable net -> logs_sorted net -> handleAppendEntries (pDst p) (nwState net (pDst p)) t n pli plt es ci = (st', m) -> pBody p = AppendEntries t n pli plt es ci -> In p (nwPackets net) -> sorted (log st') tsi : term_sanity_interface net, net' : network H : forall h : name, nwState net h = nwState net' h H0 : forall p : packet, In p (nwPackets net') -> In p (nwPackets net) H1 : logs_sorted net H2 : raft_intermediate_reachable net H3 : forall net : network, raft_intermediate_reachable net -> logs_sorted net Unable to unify \"logs_sorted_host ?M9921 /\\\\ logs_sorted_nw ?M9921 /\\\\ packets_gt_prevIndex ?M9921 /\\\\ packets_ge_prevTerm ?M9921\" with \"forall (p : packet) (t : term) (n : name) (prevT : logIndex) (prevI : term) (entries : list entry) (c : logIndex), In p (nwPackets net') -> pBody p = AppendEntries t n prevT prevI entries c -> sorted entries\".", "type": "cannot_unify", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "+", "shelve.", "+", "shelve.", "-", "split.", "+", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted."], "tactic": "+", "exn": "Wrong bullet +: Current bullet + is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "+", "shelve.", "+", "shelve.", "-", "split.", "+", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "*", "shelve.", "*", "shelve.", "*", "shelve.", "+", "split; intros.", "*", "unfold packets_gt_prevIndex.", "intros."], "tactic": "eapply packets_gt_prevIndex.", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params tsi : term_sanity_interface net, net' : network H : forall h : Net.name, nwState net h = nwState net' h H0 : forall p : packet, In p (nwPackets net') -> In p (nwPackets net) H1 : logs_sorted net H2 : raft_intermediate_reachable net p : packet t : term n : name pli : logIndex plt : term entries : list entry c : logIndex e : entry H3 : In p (nwPackets net') H4 : pBody p = AppendEntries t n pli plt entries c H5 : In e entries Unable to unify \"Prop\" with \"eIndex e > pli\".", "type": "cannot_unify", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "+", "shelve.", "+", "shelve.", "-", "split.", "+", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "*", "shelve.", "*", "shelve.", "*", "shelve.", "+", "split; intros.", "*", "unfold packets_gt_prevIndex.", "intros.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted,packets_gt_prevIndex."], "tactic": "*", "exn": "Wrong bullet *: Current bullet * is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "+", "shelve.", "+", "shelve.", "-", "split.", "+", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "*", "shelve.", "*", "shelve.", "*", "shelve.", "+", "split; intros.", "*", "unfold packets_gt_prevIndex.", "intros.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted,packets_gt_prevIndex.", "--", "shelve.", "--", "shelve.", "*", "unfold packets_ge_prevTerm.", "intros."], "tactic": "eapply packets_ge_prevTerm.", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params tsi : term_sanity_interface net, net' : network H : forall h : Net.name, nwState net h = nwState net' h H0 : forall p : packet, In p (nwPackets net') -> In p (nwPackets net) H1 : logs_sorted net H2 : raft_intermediate_reachable net p : packet t : term n : name pli : logIndex plt : term entries : list entry c : logIndex e : entry H3 : In p (nwPackets net') H4 : pBody p = AppendEntries t n pli plt entries c H5 : In e entries Unable to unify \"Prop\" with \"eTerm e >= plt\".", "type": "cannot_unify", "handled": true}, {"ctx": ["split.", "-", "qsimpl time: 1 use: handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "+", "shelve.", "+", "shelve.", "-", "split.", "+", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted.", "*", "shelve.", "*", "shelve.", "*", "shelve.", "+", "split; intros.", "*", "unfold packets_gt_prevIndex.", "intros.", "qsimpl time: 1 use: logs_sorted_invariant,handleAppendEntries_logs_sorted,packets_gt_prevIndex.", "--", "shelve.", "--", "shelve.", "*", "unfold packets_ge_prevTerm.", "intros."], "tactic": "qsimpl time: 1 use: logs_sorted_invariant,packets_ge_prevTerm,packets_gt_prevIndex,instantiate,handleAppendEntries_logs_sorted.", "exn": "The reference instantiate was not found in the current environment.", "type": "ref_not_found", "handled": true}]}, "chat": [], "original": "unfold raft_net_invariant_append_entries_reply. intros. split. - intros. eapply SortedInterface.handleAppendEntries_logs_sorted; eauto. apply logs_sorted_invariant; eauto. - split. + eapply SortedInterface.handleAppendEntries_logs_sorted; eauto. apply logs_sorted_invariant; eauto. + split; intros. * unfold packets_gt_prevIndex. intros. eapply packets_gt_prevIndex. instantiate (1 := net). eauto. * unfold packets_ge_prevTerm. intros. eapply packets_ge_prevTerm. instantiate (1 := net). eauto.", "back_times": 2, "succ": false, "time": 212.3115496635437}]