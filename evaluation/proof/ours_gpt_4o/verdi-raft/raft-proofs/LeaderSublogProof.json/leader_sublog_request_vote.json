[{"history": {"proof": "", "repairs": [], "exceptions": [{"ctx": ["intros net st' ps' h gd d Hterm_sanity Hst' Hvotes Hterm."], "tactic": "unfold votesWithLog_term_sanity.", "exn": "The reference votesWithLog_term_sanity was not found in the current environment.", "type": "ref_not_found", "handled": true}, {"ctx": ["intros net st' ps' h gd d Hterm_sanity Hst' Hvotes Hterm.", "intros t l hs h' Hin."], "tactic": "destruct (name_eq_dec h h') as [Heq | Hneq].", "exn": "In environment orig_base_params : BaseParams one_node_params : OneNodeParams orig_base_params raft_params : RaftParams orig_base_params rri : raft_refinement_interface cei : candidate_entries_interface vci : votes_correct_interface cci : cronies_correct_interface olpti : one_leader_per_term_interface net : list packet st' : packet ps' : list packet h : network gd : name -> data d : list packet Hterm_sanity : raft_data Hst' : msg Hvotes : nat Hterm : name t, l : nat hs : handleRequestVote (pDst st') (nwState h (pDst st')) Hvotes (pSrc st') t l = (Hterm_sanity, Hst') h' : pBody st' = RequestVote Hvotes Hterm t l Hin : leader_sublog_invariant h The term \"h\" has type \"network\" while it is expected to have type \"name\".", "type": "wrong_type", "handled": true}]}, "chat": [], "original": "intros net st' ps' h gd d Hterm_sanity Hst' Hvotes Hterm. unfold votesWithLog_term_sanity. intros t l hs h' Hin. destruct (name_eq_dec h h') as [Heq | Hneq]. - subst. specialize (Hst' h' H). rewrite update in Hst'. unfold update in Hst'. rewrite Hst'. destruct (Hvotes t h' hs Hin) as [Hin_old | [Hterm_eq Hlog_eq]]. + apply Hin_old. + subst. apply Nat.lt_eq_cases in Hterm. destruct Hterm. * apply Nat.le_lt_trans with (m := currentTerm (snd (nwState net h'))). -- apply Hterm_sanity. apply Hin. -- lia. * exfalso. apply Nat.lt_irrefl with (n := currentTerm (snd (nwState net h'))). rewrite <- Hterm_eq. clear -H. apply Hterm_sanity. auto. - specialize (Hst' h' Hneq). rewrite update in Hst'. unfold update in Hst'. destruct (Hvotes t h' hs Hin) as [Hin_old | [Hterm_eq Hlog_eq]]. + apply Hin_old. + subst. exfalso. apply Nat.lt_irrefl with (n := currentTerm (snd (nwState net h'))). apply Hterm_sanity. auto.", "back_times": 0, "succ": false, "time": 142.00167512893677}]