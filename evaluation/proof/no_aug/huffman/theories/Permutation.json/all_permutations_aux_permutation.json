[{"history": {"proof": "", "repairs": [], "exceptions": [{"ctx": ["intros n.", "induction n.", "-", "intros l1 l2 H H0.", "destruct H.", "destruct l2.", "+", "inversion H0."], "tactic": "+", "exn": "Wrong bullet +: Current bullet + is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["intros n.", "induction n.", "-", "intros l1 l2 H H0.", "destruct H.", "destruct l2.", "+", "inversion H0.", "*", "shelve.", "*", "shelve.", "+"], "tactic": "-", "exn": "Wrong bullet -: Current bullet + is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["intros n.", "induction n.", "-", "intros l1 l2 H H0.", "destruct H.", "destruct l2.", "+", "inversion H0.", "*", "shelve.", "*", "shelve.", "+", "shelve.", "-", "intros l1 l2 H H0.", "destruct l2.", "+", "inversion H.", "+", "simpl in H0.", "unfold all_permutations_aux in H0.", "destruct (split_one l2) eqn:split_eq."], "tactic": "-", "exn": "Wrong bullet -: Current bullet + is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["intros n.", "induction n.", "-", "intros l1 l2 H H0.", "destruct H.", "destruct l2.", "+", "inversion H0.", "*", "shelve.", "*", "shelve.", "+", "shelve.", "-", "intros l1 l2 H H0.", "destruct l2.", "+", "inversion H.", "+", "simpl in H0.", "unfold all_permutations_aux in H0.", "destruct (split_one l2) eqn:split_eq.", "*", "shelve.", "*", "shelve."], "tactic": "-", "exn": "Wrong bullet -: No more subgoals.", "type": "no_more_subgoals", "handled": true}]}, "chat": [], "original": "intros n. induction n. - intros l1 l2 H H0. destruct H. destruct l2. + inversion H0. apply permutation_nil. + inversion H. - intros l1 l2 H H0. destruct l2. + inversion H. + simpl in H0. unfold all_permutations_aux in H0. destruct (split_one l2) eqn:split_eq. rewrite split_eq in H0. apply in_flat_map in H0. destruct H0 as [p [H1 H2]]. apply in_map_iff in H1. destruct H1 as [p' [H3 H4]]. inversion H2. subst. clear H2. eapply (permutation_trans _ _ (map (cons (fst p')) (all_permutations_aux (snd p') n))). * apply permutation_trans with (l2 := map (cons (fst p')) (all_permutations_aux (snd p') (S n))). { eapply permutation_sind; try apply H4; try auto. - intros. apply in_map_iff in H2. destruct H2 as [a [H2 H3]]. subst. apply in_split in H3. destruct H3 as [l1 [l2 H3]]. rewrite H3. apply split_one_permutation. rewrite split_one_app. apply in_or_app. right. left. apply in_split. - apply permutation_skip. apply IHn. apply H4. } { apply permutation_swap. } * apply IHn. apply H1.", "succ": false}]