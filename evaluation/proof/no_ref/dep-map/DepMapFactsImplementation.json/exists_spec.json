[{"history": {"proof": "", "repairs": [], "exceptions": [{"ctx": ["intros A f H dom m.", "split.", "-", "intros H1."], "tactic": "-", "exn": "Wrong bullet -: Current bullet - is not finished.", "type": "unfinished_bullet", "handled": true}, {"ctx": ["intros A f H dom m.", "split.", "-", "intros H1.", "shelve.", "-", "intros [x [v [H1 H2]]]."], "tactic": "unfold find_dom.", "exn": "Cannot coerce find_dom to an evaluable reference.", "type": "not_evaluable", "handled": true}, {"ctx": ["intros A f H dom m.", "split.", "-", "intros H1.", "shelve.", "-", "intros [x [v [H1 H2]]]."], "tactic": "rewrite (add_cancel A x v dom m H1).", "exn": "In environment A : Type f : X.t \u2192 A \u2192 bool H : Proper (X.eq ==> Logic.eq ==> Logic.eq) f dom : Dom.t m : t A dom x : key v : A H1 : find x m = Some v H2 : f x v = true The term \"A\" has type \"Type\" while it is expected to have type \"find ?x ?m = Some ?v\".", "type": "wrong_type", "handled": true}, {"ctx": ["intros A f H dom m.", "split.", "-", "intros H1.", "shelve.", "-", "intros [x [v [H1 H2]]]."], "tactic": "rewrite H2.", "exn": "Found no subterm matching \"f x v\" in the current goal.", "type": "no_subterm", "handled": true}]}, "chat": [], "original": "intros A f H dom m. split. - intros H1. exists (projT1 (find_dom _ _ _ _ _ H1)). exists (projT2 (find_dom _ _ _ _ _ H1)). split. + apply find_dom. apply proj1 in H1. rewrite <- (add_cancel A _ _ _ _ H1). destruct (find A) as [v|]. * apply H1. * contradict H1. + reflexivity. - intros [x [v [H1 H2]]]. unfold find_dom. rewrite (add_cancel A x v dom m H1). rewrite H2. apply S.filter_spec. apply S.Dom.In_compat; auto.", "succ": false}]